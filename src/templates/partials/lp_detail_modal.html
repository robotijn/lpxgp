<!-- LP Detail Modal Content -->
<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50"
     onclick="if(event.target === this) this.remove()">
    <div class="bg-white rounded-xl shadow-2xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto"
         onclick="event.stopPropagation()">
        <!-- Header -->
        <div class="sticky top-0 bg-white border-b border-navy-100 px-6 py-4 flex items-center justify-between">
            <div>
                <h2 class="text-xl font-bold text-navy-900">{{ lp.name }}</h2>
                <p class="text-sm text-navy-500">{{ lp.lp_type|title if lp.lp_type else 'Institutional Investor' }} | {{ lp.hq_city }}{% if lp.hq_country %}, {{ lp.hq_country }}{% endif %}</p>
            </div>
            <button onclick="this.closest('.fixed').remove()"
                    class="text-navy-400 hover:text-navy-600 p-1">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>

        <div class="p-6 space-y-6">
            <!-- LP Profile Stats -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="bg-navy-50 rounded-lg p-3 text-center">
                    <div class="text-lg font-bold text-navy-900">${{ lp.total_aum_bn or '-' }}B</div>
                    <div class="text-xs text-navy-500">Total AUM</div>
                </div>
                <div class="bg-navy-50 rounded-lg p-3 text-center">
                    <div class="text-lg font-bold text-navy-900">{{ lp.pe_allocation_pct or '-' }}%</div>
                    <div class="text-xs text-navy-500">PE Allocation</div>
                </div>
                <div class="bg-navy-50 rounded-lg p-3 text-center">
                    <div class="text-lg font-bold text-navy-900">${{ lp.check_size_min_mm or '?' }}-{{ lp.check_size_max_mm or '?' }}M</div>
                    <div class="text-xs text-navy-500">Check Size</div>
                </div>
                <div class="bg-navy-50 rounded-lg p-3 text-center">
                    {% if lp.website %}
                    <a href="{{ lp.website }}" target="_blank" class="text-lg font-bold text-gold hover:underline">Visit</a>
                    {% else %}
                    <div class="text-lg font-bold text-navy-400">-</div>
                    {% endif %}
                    <div class="text-xs text-navy-500">Website</div>
                </div>
            </div>

            <!-- Description -->
            {% if lp.description %}
            <div class="bg-navy-50 rounded-lg p-4">
                <h3 class="text-sm font-semibold text-navy-700 mb-2">About</h3>
                <p class="text-navy-700 text-sm">{{ lp.description }}</p>
            </div>
            {% endif %}

            <!-- Investment Criteria -->
            <div>
                <h3 class="text-sm font-semibold text-navy-700 mb-3">Investment Criteria</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <div class="text-xs text-navy-500 mb-1">Target Fund Size</div>
                        <div class="text-sm font-medium text-navy-900">
                            {% if lp.fund_size_min_mm or lp.fund_size_max_mm %}
                            ${{ lp.fund_size_min_mm or '?' }}M - ${{ lp.fund_size_max_mm or '?' }}M
                            {% else %}
                            Not specified
                            {% endif %}
                        </div>
                    </div>
                    <div>
                        <div class="text-xs text-navy-500 mb-1">Min Track Record</div>
                        <div class="text-sm font-medium text-navy-900">
                            {{ lp.min_track_record_years or '-' }} years
                        </div>
                    </div>
                    <div>
                        <div class="text-xs text-navy-500 mb-1">Min Fund Number</div>
                        <div class="text-sm font-medium text-navy-900">
                            Fund {{ lp.min_fund_number or 'I' }}+
                        </div>
                    </div>
                    <div>
                        <div class="text-xs text-navy-500 mb-1">Requirements</div>
                        <div class="flex gap-2">
                            {% if lp.esg_required %}
                            <span class="px-2 py-0.5 text-xs bg-green-100 text-green-700 rounded">ESG Required</span>
                            {% endif %}
                            {% if lp.emerging_manager_ok %}
                            <span class="px-2 py-0.5 text-xs bg-blue-100 text-blue-700 rounded">Emerging OK</span>
                            {% endif %}
                            {% if not lp.esg_required and not lp.emerging_manager_ok %}
                            <span class="text-sm text-navy-400">-</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Strategies -->
            {% if lp.strategies %}
            <div>
                <h3 class="text-sm font-semibold text-navy-700 mb-2">Strategies</h3>
                <div class="flex flex-wrap gap-2">
                    {% for strategy in lp.strategies %}
                    <span class="px-3 py-1 text-sm bg-green-100 text-green-800 rounded-full">{{ strategy|title }}</span>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <!-- Geographic Preferences -->
            {% if lp.geographic_preferences %}
            <div>
                <h3 class="text-sm font-semibold text-navy-700 mb-2">Geographic Focus</h3>
                <div class="flex flex-wrap gap-2">
                    {% for geo in lp.geographic_preferences %}
                    <span class="px-3 py-1 text-sm bg-navy-100 text-navy-700 rounded-full">{{ geo }}</span>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <!-- Sector Preferences -->
            {% if lp.sector_preferences %}
            <div>
                <h3 class="text-sm font-semibold text-navy-700 mb-2">Sector Focus</h3>
                <div class="flex flex-wrap gap-2">
                    {% for sector in lp.sector_preferences %}
                    <span class="px-3 py-1 text-sm bg-gold/20 text-gold rounded-full">{{ sector }}</span>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <!-- Mandate Description -->
            {% if lp.mandate_description %}
            <div class="bg-gold/10 border border-gold/30 rounded-lg p-4">
                <h3 class="text-sm font-semibold text-navy-700 mb-2">Investment Mandate</h3>
                <p class="text-navy-700 text-sm">{{ lp.mandate_description }}</p>
            </div>
            {% endif %}

            <!-- Contacts -->
            {% if contacts %}
            <div class="border-t border-navy-100 pt-4">
                <h3 class="text-sm font-semibold text-navy-700 mb-3">Contacts</h3>
                <div class="space-y-3">
                    {% for contact in contacts %}
                    <div class="flex items-center justify-between p-3 bg-navy-50 rounded-lg">
                        <div>
                            <div class="font-medium text-navy-900">{{ contact.full_name }}</div>
                            {% if contact.title %}
                            <div class="text-sm text-navy-500">{{ contact.title }}</div>
                            {% endif %}
                        </div>
                        <div class="flex gap-2">
                            {% if contact.email %}
                            <a href="mailto:{{ contact.email }}" class="text-gold hover:text-gold/80">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                                </svg>
                            </a>
                            {% endif %}
                            {% if contact.linkedin_url %}
                            <a href="{{ contact.linkedin_url }}" target="_blank" class="text-blue-600 hover:text-blue-800">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                                </svg>
                            </a>
                            {% endif %}
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>

        <!-- Footer Actions -->
        <div class="sticky bottom-0 bg-white border-t border-navy-100 px-6 py-4 flex justify-end gap-3">
            <button onclick="this.closest('.fixed').remove()"
                    class="px-4 py-2 text-navy-600 hover:text-navy-800 font-medium">
                Close
            </button>
        </div>
    </div>
</div>
